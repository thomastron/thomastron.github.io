<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PT$D — First Edition Sample & Launch</title>
  <meta name="description" content="Read and listen to sample chapters from PT$D (First Edition). Help launch by buying, reviewing, and sharing." />
  <meta name="robots" content="index,follow" />
  <meta name="theme-color" content="#0b0c10" />

  <!-- Canonical -->
  <link rel="canonical" href="https://thomastron.github.io/" />

  <!-- Favicons (replace with your own sizes/paths) -->
  <link rel="icon" href="/favicon.ico" sizes="any">
  <link rel="icon" href="/icon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">

  <!-- Open Graph / Social -->
  <meta property="og:title" content="PT$D — First Edition" />
  <meta property="og:description" content="Sample chapters (text + audio). This first edition is print-on-demand—your order is the launch." />
  <meta property="og:type" content="website" />
  <meta property="og:url" content="https://thomastron.github.io/" />
  <meta property="og:image" content="https://thomastron.github.io/cover.jpg" />
  <meta property="og:image:alt" content="PT$D cover" />
  <meta property="og:site_name" content="PT$D" />

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content="PT$D — First Edition" />
  <meta name="twitter:description" content="Sample chapters (text + audio). This first edition is print-on-demand—your order is the launch." />
  <meta name="twitter:image" content="https://thomastron.github.io/cover.jpg" />

  <!-- Preload hero image to avoid CLS -->
  <link rel="preload" as="image" href="./cover.jpg" imagesrcset="./cover.jpg" imagesizes="(max-width: 820px) 100vw, 40vw" />

  <style>
    :root { --bg: #0b0c10; --panel: #121318; --ink: #e6e7eb; --muted: #a7adba; --accent: #7dd3fc; --accent2: #a78bfa; --ok: #34d399; --warn: #fbbf24; }
    * { box-sizing: border-box; }
    html, body { margin:0; padding:0; background: var(--bg); color: var(--ink); font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"; }
    a { color: var(--accent); text-decoration: none; }
    a:hover { text-decoration: underline; }
    .wrap { max-width: 980px; margin: 0 auto; padding: 24px; }
    header.hero { display: grid; grid-template-columns: 1fr; gap: 24px; align-items: center; padding: 32px 0 8px; }
    .card { background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02)); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; padding: 20px; box-shadow: 0 10px 24px rgba(0,0,0,0.35); }
    .pill { display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; border:1px solid rgba(255,255,255,0.12); color: var(--muted); font-size: 12px; letter-spacing:.25px; }
    .title { font-size: clamp(28px, 4vw, 42px); line-height:1.1; margin: 4px 0 8px; }
    .subtitle { color: var(--muted); font-size: clamp(14px, 2vw, 18px); }
    .cta-row { display:flex; flex-wrap:wrap; gap:12px; margin-top: 16px; }
    .btn { appearance:none; border:1px solid rgba(255,255,255,0.12); background: radial-gradient(100% 100% at 50% 0%, rgba(125,211,252,0.16), rgba(167,139,250,0.06)); color: var(--ink); padding: 12px 16px; border-radius: 12px; font-weight: 600; cursor: pointer; }
    .btn:hover{ transform: translateY(-1px); }
    .btn.primary{ background: linear-gradient(135deg, rgba(125,211,252,0.25), rgba(167,139,250,0.25)); border-color: rgba(255,255,255,0.22); }
    .grid { display:grid; grid-template-columns: 1fr; gap: 16px; }
    section { margin: 28px 0; }
    h2 { font-size: 18px; text-transform: uppercase; letter-spacing: .18em; color: var(--muted); margin: 0 0 12px; }
    .media { display:grid; grid-template-columns: 1fr; gap: 16px; }
    .pdf-list a { display:flex; align-items:center; justify-content: space-between; gap: 12px; padding: 12px 14px; border-radius: 12px; border:1px solid rgba(255,255,255,0.12); background: rgba(255,255,255,0.02); }
    .tag { font-size: 12px; color: var(--muted); border:1px solid rgba(255,255,255,.12); padding: 2px 8px; border-radius: 999px; }
    .note { color: var(--muted); font-size: 14px; }
    .callout { border-left: 3px solid var(--accent); padding-left: 12px; color: var(--muted); }
    footer { margin: 40px 0 24px; color: var(--muted); font-size: 13px; }
    .flex { display:flex; gap: 12px; align-items:center; }
    .two { display:grid; grid-template-columns: 1fr; gap:16px; }
    .buybox { display:grid; grid-template-columns: 1fr; gap: 12px; }
    .share-row { display:flex; flex-wrap:wrap; gap:10px; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace; }
    .small { font-size: 12px; color: var(--muted); }
    details { border:1px solid rgba(255,255,255,0.12); padding: 12px 14px; border-radius: 12px; }
    details > summary { cursor: pointer; font-weight: 600; }
    blockquote{ margin: 0; padding: 12px 14px; border-left: 3px solid var(--accent2); color: var(--muted); font-style: italic; background: rgba(255,255,255,0.02); border-radius: 8px; }

    @media (min-width: 820px) {
      header.hero { grid-template-columns: 1.2fr .8fr; }
      .grid.two { grid-template-columns: 1fr 1fr; }
      .media { grid-template-columns: 1fr 1fr 1fr; }
      .buybox { grid-template-columns: 1fr 1fr; }
    }
    .btn.xl{ font-size:18px; padding:16px 20px; }
    /* Focus styles for accessibility */
    :focus-visible { outline: 2px dashed var(--accent); outline-offset: 2px; }
  </style>

  <script>
    function copyText(id, btnId){
      const el = document.getElementById(id);
      const btn = document.getElementById(btnId);
      const live = document.getElementById('liveRegion');
      if (!el) return;
      const value = el.getAttribute('href') || el.textContent.trim();
      navigator.clipboard.writeText(value).then(()=>{
        if(btn){ const old = btn.textContent; btn.textContent = 'Copied!'; setTimeout(()=> btn.textContent = old, 1400); }
        if(live){ live.textContent = 'Buy link copied to clipboard.'; setTimeout(()=> live.textContent='', 1500); }
      });
    }
    async function share(title, text){
      const url = window.location.href;
      if (navigator.share){
        try { await navigator.share({ title, text, url }); } catch(e){}
      } else { navigator.clipboard.writeText(url).then(()=>{ alert('Link copied to clipboard.'); }); }
    }
    function swapPreview(href){
      const frame = document.getElementById('pdfPreview');
      frame.src = href; window.scrollTo({ top: frame.offsetTop - 80, behavior: 'smooth' });
    }
    // set year in footer
    window.addEventListener('DOMContentLoaded', ()=>{
      const y = document.getElementById('y'); if (y) y.textContent = new Date().getFullYear();
    });
  </script>

  <!-- Schema.org Book (fill placeholders) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "Book",
    "name": "PT$D",
    "bookEdition": "First Edition",
    "author": {"@type":"Person","name":"Thomas Dwyer"},
    "datePublished": "2025-09-20",
    "publisher": {"@type":"Organization","name":"Thomas Dwyer"},
    "description": "Sample chapters and launch info for PT$D. Print-on-demand first edition.",
    "image": "https://thomastron.github.io/cover.jpg",
    "url": "https://thomastron.github.io/",
    "isbn": "979-8218797607",
    "inLanguage": "en",
    "numberOfPages": 219,
    "offers": {
      "@type": "Offer",
      "url": "https://www.amazon.com/dp/B0FS352Z6J",
      "availability": "https://schema.org/InStock",
      "priceCurrency": "USD",
      "sku": "B0FS352Z6J"
    },
    "workExample": {
      "@type": "Book",
      "bookFormat": "EBook",
      "potentialAction": {
        "@type": "ReadAction",
        "target": {"@type":"EntryPoint","urlTemplate":"https://thomastron.github.io/samples/PT%24D%20Sample.pdf"}
      }
    }
  }
  </script>
  <meta name="author" content="Thomas Dwyer" />
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div>
        <span class="pill" aria-label="Edition information">First Edition • Print-on-Demand • Document Control</span>
        <h1 class="title">PT$D<br><span class="subtitle">Truth as Currency in a Market of Denial</span></h1>
        <p class="subtitle">This launch runs on friends + the quality of the argument. No stockpile. No budget. Your order and review are the signal.</p>
        <blockquote>“A shared, dark laugh for resilience.”</blockquote>
        <div class="cta-row">
          <a class="btn primary" href="https://www.amazon.com/dp/B0FS352Z6J?utm_source=site&utm_medium=button&utm_campaign=launch" target="_blank" rel="noopener noreferrer" id="buyLink">Send a Signal (Buy)</a>
          <button class="btn" type="button" onclick="share('PT$D — First Edition', 'Help us juice the algorithm: buy, review, and share this link.')">Share This Page</button>
          <button class="btn" type="button" onclick="copyText('buyLink', 'copyBtn')" id="copyBtn" aria-describedby="liveRegion">Copy Buy Link</button>
        </div>
        <p class="note" style="margin-top:10px">Early <strong>orders</strong> + <strong>honest reviews</strong> teach the algorithm what matters. Print-on-demand means no author stash—your purchase is the release.</p>
        <div id="liveRegion" class="small" aria-live="polite" style="min-height:1em"></div>
      </div>
      <div>
        <div class="card">
          <img src="./cover.jpg" alt="PT$D cover" style="width:100%; height:auto; border-radius:12px; display:block; background:#0f1115;" fetchpriority="high" />
          <div class="flex" style="margin-top:12px; justify-content:space-between;">
            <span class="tag" aria-label="Version">v1.0 • First Edition</span>
          </div>
        </div>
      </div>
    </header>

    <section class="card preview-top">
      <h2>Sample PDF</h2>
      <p class="note">Mobile-first approach: open the PDF in a new tab (best experience on phones). Desktop users can optionally toggle an inline preview.</p>

      <div class="cta-row" style="margin-bottom:10px">
        <a class="btn primary xl" href="/samples/PT%24D%20Sample.pdf" target="_blank" rel="noopener noreferrer" type="application/pdf">Open PDF in New Tab</a>
        <a class="btn xl" href="/samples/PT%24D%20Sample.pdf" download="PTSD_FirstEdition_Sample.pdf">Download PDF</a>
      </div>

      <details>
        <summary>Show Inline Preview (Desktop)</summary>
        <div class="small" style="margin:8px 0 12px">Inline preview may be clunky on some mobile browsers. Use the buttons above if it stalls.</div>
        <iframe id="pdfPreview" title="PDF preview" src="/samples/PT%24D%20Sample.pdf" loading="lazy" style="width:100%; height:70vh; max-height:820px; border:1px solid rgba(255,255,255,0.1); border-radius:12px; background:#0f1115"></iframe>
        <p class="small" style="margin-top:8px">The packet includes Preface, Introduction, minimal Chapter 1 context, and a curated Chapter 2 excerpt. Watermarked as First Edition Sample. <noscript><a href="/samples/PT%24D%20Sample.pdf">Open the PDF sample</a></noscript></p>
      </details>

      <style>
        /* Prefer links over iframes on narrow screens */
        @media (max-width: 680px){
          #pdfPreview { height: 65vh; }
        }
      </style>
    </section>

    <section class="card">
      <h2>Listen: Sample Audio</h2>
      <div class="note" style="margin-bottom:10px">Pick a track below; change the speed in the menu ⋮ ··· 1.25X etc. Direct links are provided for downloads and stubborn browsers.</div>

      <div class="grid" style="gap:12px">
        <div class="pdf-list">
          <a href="/audio/Preface.mp3" target="_blank" rel="noopener noreferrer" onclick="event.preventDefault(); playTrack('/audio/Preface.mp3','Preface');">
            <span><strong>Preface and About</strong> — MP3</span>
            <span class="tag">Listen / Download</span>
          </a>
          <a href="/audio/Introduction.mp3" target="_blank" rel="noopener noreferrer" onclick="event.preventDefault(); playTrack('/audio/Introduction.mp3','Introduction');">
            <span><strong>Introduction</strong> — MP3</span>
            <span class="tag">Listen / Download</span>
          </a>
          <a href="/audio/ChapterExcerpt.mp3" target="_blank" rel="noopener noreferrer" onclick="event.preventDefault(); playTrack('/audio/ChapterExcerpt.mp3','Chapter Excerpt');">
            <span><strong>Chapter Excerpt</strong> — MP3</span>
            <span class="tag">Listen / Download</span>
          </a>
        </div>

        <div class="card" style="background:rgba(255,255,255,0.03)">
          <div class="flex" style="justify-content:space-between"><strong id="nowPlaying">Now Playing: —</strong><span class="tag">Audio</span></div>
          <audio id="player" controls preload="none" style="width:100%" crossorigin="anonymous">
            <source src="" type="audio/mpeg" />
            Your browser does not support the audio element. <a href="/audio/Preface.mp3">Download the MP3s here.</a>
          </audio>
        </div>
      </div>
      <div class="small" style="margin-top:8px">If the player stalls, use the Listen / Download links to open the files directly in a new tab.</div>
    </section>

    <!-- Audio controller + self-tests -->
    <script>
      // Build a robust source list: prefer GitHub Pages, fall back to raw.githubusercontent if needed
      function buildSources(path){
        const pages = new URL(path, window.location.origin).href; // e.g., https://thomastron.github.io/audio/Preface.mp3
        const filename = path.split('/').pop();
        const raw = `https://raw.githubusercontent.com/thomastron/thomastron.github.io/main/audio/${filename}`;
        return [pages, raw];
      }

      function playTrack(pathOrUrl, label){
        const p = document.getElementById('player');
        const np = document.getElementById('nowPlaying');
        const debug = document.getElementById('audioDebug');
        if(!p) return;

        // Accept either a path ("/audio/Preface.mp3") or a full URL
        const sources = pathOrUrl.startsWith('http') ? [pathOrUrl] : buildSources(pathOrUrl);
        let idx = 0;

        const tryPlay = ()=>{
          const src = sources[idx];
          if(!src){ if(np) np.textContent = 'Now Playing: (failed)'; return; }
          p.pause(); p.src = src; p.load();
          if(np) np.textContent = 'Now Playing: ' + (label || src.split('/').pop());
          if(debug) debug.textContent = 'Source: ' + src;
          const prom = p.play();
          if (prom && typeof prom.catch === 'function') {
            prom.catch(()=>{/* user gesture or autoplay; ignore */});
          }
        };

        // On error, try the next source
        const onError = ()=>{
          idx += 1; tryPlay();
        };

        // Remove previous error handler to avoid stacking
        p.removeEventListener('error', p.__onErr || (()=>{}));
        p.__onErr = onError;
        p.addEventListener('error', onError, { once:false });

        tryPlay();
      }

      // Minimal self-tests (console-only)
      window.addEventListener('DOMContentLoaded', ()=>{
        console.assert(typeof playTrack === 'function', 'playTrack is not defined');
        const player = document.getElementById('player');
        console.assert(!!player, 'Audio <audio id="player"> is missing');
        const names = ['Preface.mp3','Introduction.mp3','ChapterExcerpt.MP3'];
        names.forEach(n=>{
          const a = Array.from(document.querySelectorAll('.pdf-list a')).find(el => (el.getAttribute('href')||'').endsWith(n));
          console.assert(!!a, 'Missing link for ' + n);
        });
      });
    </script>

    <section class="card">
      <h2>Why First Edition Samples?</h2>
      <p class="callout">This launch is a live experiment: friends + argument quality are the marketing. If the sample resonates, the rest of the book compounds it. We trade hype for coherence.</p>
      <details style="margin-top:10px">
        <summary>Document Control Notes</summary>
        <ul>
          <li>Label files clearly: <span class="mono">PTSD_FirstEdition_v1.0</span>. Bump minor versions for typo fixes.</li>
          <li>Include a footer in PDFs: edition + link.</li>
          <li>Add a CHANGELOG.md in the repo for transparency.</li>
        </ul>
      </details>
    </section>

    <section class="grid two">
      <div class="card">
        <h2>Launch Protocol (Quick)</h2>
        <ol>
          <li>Buy a copy today (velocity matters).</li>
          <li>Leave a short, honest review (teaches the machine what to surface).</li>
          <li>Share this page with 1–2 people who will care.</li>
        </ol>
        <div class="share-row" style="margin-top:10px">
          <button class="btn" type="button" onclick="share('PT$D — First Edition', 'I just grabbed the book. Here’s the sample + buy link:')" aria-label="Share this page">Share</button>
          <a class="btn" rel="noopener noreferrer" target="_blank"
             href="https://twitter.com/intent/tweet?text=First%20edition%20sample%20of%20PT%24D%20%E2%80%94%20preface%2C%20intro%2C%20audio.&url=https%3A%2F%2Fthomastron.github.io%2F%3Futm_source%3Dtwitter%26utm_medium%3Dsocial%26utm_campaign%3Dlaunch">
            X / Twitter
          </a>
          <a class="btn" rel="noopener noreferrer" target="_blank"
             href="https://www.linkedin.com/sharing/share-offsite/?url=https%3A%2F%2Fthomastron.github.io%2F%3Futm_source%3Dlinkedin%26utm_medium%3Dsocial%26utm_campaign%3Dlaunch">
            LinkedIn
          </a>
          <a class="btn" rel="noopener noreferrer" target="_blank"
             href="mailto:?subject=PT%24D%20%E2%80%94%20first%20edition%20sample&body=Here%E2%80%99s%20the%20preface%20%2B%20intro%20%2B%20audio%20samples%20I%20mentioned%3A%20https%3A%2F%2Fthomastron.github.io%2F%3Futm_source%3Demail%26utm_medium%3Dshare%26utm_campaign%3Dlaunch">
            Email
          </a>
        </div>
        <p class="small" style="margin-top:8px">Insider note: early comments amplify discovery. Thanks for helping us train the recommendation layer.</p>
      </div>
    </section>

    <footer>
      <div class="flex" style="justify-content:space-between; flex-wrap:wrap; gap:8px">
        <div>
          © <span id="y"></span> Thomas Dwyer • First Edition • <a href="https://www.amazon.com/dp/B0FS352Z6J?utm_source=site&utm_medium=footer_link&utm_campaign=launch" target="_blank" rel="noopener noreferrer">Buy</a>
        </div>
        <div class="small">Built for readers who prefer coherence over hype.</div>
      </div>
    </footer>
  </div>
</body>
</html>
